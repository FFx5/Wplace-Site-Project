<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <title>GensokyoDwellers</title>
  
  <!-- Standard favicon -->
  <link rel="icon" href="satori koishi yin yang.png" type="image/png">
  
  <!-- For iOS (iPhone/iPad home screen icons) -->
  <link rel="apple-touch-icon" sizes="180x180" href="/satori koishi yin yang.png">
  
  <!-- For Android/Chrome -->
  <link rel="icon" sizes="192x192" href="satori koishi yin yang.png">
  <link rel="icon" sizes="512x512" href="satori koishi yin yang.png">
  
  <!-- PyScript setup -->
  <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
  <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

  <style>
    /* Flex container for side images + main box */
    .flex-container {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      flex-wrap: wrap;
      gap: 20px;
      padding: 20px;
    }

    .side-img {
      width: 200px;
      max-width: 100%;
    }

    .main-box {
      position: relative;
      background-image: url('yuyuko dies.png');
      background-repeat: no-repeat;
      background-size: 100% 100%;
      background-position: top center;
      padding: 175px 100px;
      border-radius: 15px;
      text-align: center;
      width: 600px;
      max-width: 100%;
    }

    .overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.4);
      border-radius: 15px;
      z-index: 1;
    }

    .content {
      position: relative;
      z-index: 2;
    }

    @media (max-width: 800px) {
      .flex-container {
        flex-direction: column;
        align-items: center;
      }
    }

    /* Touhou game styling */
    #touhou-game {
      margin: auto;
      margin-top: 10px;
      margin-bottom: 50px;
      text-align: center;
      color: white;
      max-width: 600px;
    }

    #user-input {
      padding: 5px;
      margin-top: 10px;
    }

    #submit-btn, #start-btn {
      margin: 10px;
      padding: 5px 15px;
      border-radius: 5px;
      cursor: pointer;
    }

    #game-output {
      min-height: 50px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body style="background-color: rgb(0, 0, 0);" cz-shortcut-listen="true">

  <div class="flex-container">
    <img src="satori fumo.png" style="width: 300px" class="side-img">
    <div class="main-box">
      <div class="overlay"></div>
      <div class="content">
        <div>
          <a href="https://wplace.live/join?id=0198e987-760e-78b7-a2c1-d77feacc69ad" target="_blank" style="font-family: Arial; font-size: 36px; color: blue;">
            Join the GensokyoDwellers Alliance
          </a>
        </div>
        <div style="margin-top: 50px;">
          <a style="font-family: Arial; font-size: 17px; color: black;">
            pretty please...
          </a>
        </div>
        <div style="margin-top: 100px;">
          <a style="font-family: Arial; font-size: 24px; color: red; text-shadow: 
              -1px -1px 0 white,  
               1px -1px 0 white,
              -1px  1px 0 white,
               1px  1px 0 white;">
            If you have to sign in after clicking the link, then you will have to sign in and come back here and click it again. 
            Currently, for some reason, it always says it is invalid right after signing in.
          </a>
        </div>
      </div>
    </div>
    <img src="koishi fumo.png" style="width: 300px" class="side-img">
  </div>

  <div style="text-align: center">
    <a href="https://discord.gg/WxvjdW8mSR" target="_blank">
      <img src="discord logo.png" alt="Join the GensokyoDwellers Discord" style="width:100px; height:100px;">
    </a>
  </div>
  
  <!-- Touhou guessing game section -->
  <div id="touhou-game">
    <div>
      This game was originally made to run on a command line terminal. Many things must be changed in the Python code to make it work within HTML on a website, 
      so currently, many things are broken or not implemented yet from the original. It is still a work in progress. I have spent too much time working on this today 
      (9/27/25) lol. As all currently guessable characters were just what I could think of off the top of my head, feel free to dm me on discord (fastfost5) requesting 
      characters you would like added to the roulette pool!<br>Expect more improvements in the future!
    </div>
    
    <h2>Guess the 2hu!</h2>
    <div style="margin-top: -20px;">Version 2.2.0.</div>
    <div><br>Game info:</div>
    <ul style="text-align: left;">
        <li>The maximum number of hints is 3. (Updated hint system!)</li>
        <li>Input "idk" as your guess if you don't know and want to give up.</li>
        <li>Not ALL characters are included in this game but MANY are. (You can inspect the site's HTML to see the list of possible characters in the Python code.)</li>
        <li>When guessing a name, I tried to make it to where the part you need to guess might either be the most commonly used part of the character's name (or a nickname, Ex: Okuu) OR the first part of their name. All names are one word.<br>Examples:
          <ul>
            <li>Eiki</li>
            <li>Yorihime</li>
            <li>Mokou</li>
            <li>Sunny</li>
          </ul>
        </li>
        <li>You can use the "Start" button or keybind to keep restarting the game.<br>Warning: At the moment, it will restart in the middle of an ongoing game is pressed.</li>
        <li>Keybinds:
          <ul>
            <li>Start game: Space</li>
            <li>Submit guess: Enter</li>
            <li>Get a hint: Ctrl</li>
          </ul>
        </li>
    </ul>
    <div id="game-output"><br>Press "Start" to begin.</div>
    <button id="hint-btn">Hint</button>
    <input type="text" id="user-input" placeholder="Enter your guess">
    <button id="submit-btn">Submit</button>
    <button id="start-btn">Start</button>
  </div>

  <!-- Embedded Python game logic -->
  <script type="py">
import random
from js import document
from pyodide.ffi import create_proxy

# List of 2hus
_2hus = [
    'Reimu', 'Marisa', 'Sanae', 'Suwako', 'Kanako', 'Yukari',
    'Ran', 'Chen', 'Yuyuko', 'Youmu', 'Satori', 'Koishi', 'Orin',
    'Okuu', 'Cirno', 'Daiyousei', 'Rumia', 'Meiling', 'Koakuma',
    'Patchouli', 'Sakuya', 'Remilia', 'Flandre', 'Parsee',
    'Yuuka', 'Reisen', 'Tewi', 'Mokou', 'Kaguya', 'Eirin',
    'Keine', 'Mystia', 'Aya', 'Momiji', 'Futo', 'Iku', 'Tenshi',
    'Doremy', 'Yorihime', 'Toyohime', 'Nue', 'Kogasa', 'Alice',
    'Junko', 'Hecatia', 'Clownpiece', 'Okina', 'Wriggle',
    'Nareko', 'Aunn', 'Nitori', 'Hina', 'Eiki', 'Kasen', 'Seija',
    'Byakuren', 'Nazrin', 'Sekibanki', 'Kokoro', 'Yuugi',
    'Suika', 'Lily', 'Letty', 'Sunny', 'Luna', 'Star', 'Satono',
    'Mai', 'Mamizou', 'Minamitsu', 'Ichirin', 'Mike', 'Kisume',
    'Yamame', 'Komachi', 'Kutaka', 'Mima', 'Miko', 'Joon',
    'Chimata', 'Saki'
]

random_2hu = None
guess_count = 0
hints_given = 0

game_output = document.getElementById("game-output")
user_input = document.getElementById("user-input")

def append_output(msg):
    game_output.innerHTML += "<br>" + msg

def start_game(*args):
    global random_2hu, guess_count, hints_given
    random_2hu = random.choice(_2hus)
    guess_count = 0
    hints_given = 0
    game_output.innerHTML = ""
    append_output("Game started! Guess the 2hu!")
    # append_output(random_2hu)   # This line will show the random 2hu. Used for bug testing.

def submit_guess(*args):
    global random_2hu, guess_count, hints_given
    if not random_2hu:
        append_output("Click Start first!")
        return

    guess = user_input.value.strip()
    user_input.value = ""
    guess_count += 1

    if guess.lower() == random_2hu.lower():
        append_output(f"Nice! It was {random_2hu}!")
        random_2hu = None
    elif guess.lower() == "idk":
        append_output(f"Too bad! It was {random_2hu}.")
        random_2hu = None
    else:
        append_output(f"Nope, try again! (Your guess: {guess})")

def get_hint(*args):
    global random_2hu, hints_given
    if not random_2hu:
        append_output("Click Start first!")
        return
    
    if hints_given < 3:
        hints_given += 1
        if hints_given == 1:
            append_output(f"Hint: The name has {len(random_2hu)} letters.")
        elif hints_given == 2:
            append_output(f"Hint: The first letter is {random_2hu[0]}.")
        elif hints_given == 3:
            append_output(f"Hint: The last letter is {random_2hu[-1]}. (Last hint!)")
    else:
        append_output("No more hints!")

def handle_key(event):
    if event.key == " ":
        document.getElementById("start-btn").click()
    elif event.key == "Enter":
        document.getElementById("submit-btn").click()
    elif event.key == "Control":
        document.getElementById("hint-btn").click()

# Wrap Python functions in proxies for JS
start_proxy = create_proxy(start_game)
submit_proxy = create_proxy(submit_guess)
hint_proxy = create_proxy(get_hint)
key_proxy = create_proxy(handle_key)

# Add JS event listeners
document.getElementById("start-btn").addEventListener("click", start_proxy)
document.getElementById("submit-btn").addEventListener("click", submit_proxy)
document.getElementById("hint-btn").addEventListener("click", hint_proxy)
document.addEventListener("keydown", key_proxy)
  </script><script-py id="py-0"></script-py>
</body></html>
